<head>
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
  ;
  <link rel="stylesheet" href="//src/lib/layui-v2.5.5/css/layui.css" media="all">

</head>
<script type="text/html" template lay-done="layui.data.sendParams(d.params)">
  <input type="text" style="display: none;" name="id" value="{{d.params.id||''}}">
</script>


<div class="layui-fluid layui-anim lovexian-anim" id="lovexian-command" lay-title="接口管理">
  <div class="layui-row lovexian-container">
    <div class="layui-col-md12">
      <div class="layui-card">
        <div class="layui-card-body lovexian-table-full">
          <div class="layui-row">
            <form name="messageForm" class="layui-form layui-table-form" lay-filter="action-table-form">
              <div class="layui-row">
                <div class="layui-col-md12">
                  <div class="layui-form layui-form-item">
                    <div class="layui-inline">
                    <label class="layui-form-label lovexian-form-item-require">下发命令</label>
                    <div class="layui-inline" style="width:200px !important">
                      <select name="command" id="command" lay-filter="category" onchange="changeType()">
                        <option value="0">请选择</option>
                        <option value="A1">A1</option>
                        <option value="A2">A2</option>
                        <option value="A3">A3</option>
                        <option value="A4">A4</option>
                        <option value="A5">A5</option>
                        <option value="A7">A7</option>
                        <option value="A9">A9</option>
                      </select>
                    </div>
                    </div>
                    <div class="layui-inline">
                      <label  class="layui-form-label  lovexian-form-item-require layui-form-label-md ">设备ID</label>
                      <div class="layui-input-inline">
                        <input type="text" id="deviceId" name="deviceId" autocomplete="off" class="layui-input">
                      </div>
                    </div>
                    <div class="layui-inline">
                      <label  class="layui-form-label layui-form-label-sm">传感器编号</label>
                      <div class="layui-input-inline">
                        <input type="text" id="sensorSerialNum" name="sensorSerialNum" autocomplete="off" class="layui-input">
                      </div>
                    </div>
                    <div class="layui-inline">
                      <label  class="layui-form-label layui-form-label-sm">传感器个数</label>
                      <div class="layui-input-inline">
                        <input type="text" id="sensorNum" name="sensorNum" autocomplete="off" class="layui-input">
                      </div>
                    </div>
                  </div>
                  <div class="layui-form layui-form-item">
                    <div class="layui-inline">
                      <label class="layui-form-label lovexian-form-item-require">传感器类型</label>
                      <div class="layui-inline" style="width:200px !important">
                        <select name="sensorType" id="sensorType">
                          <option value="0">请选择</option>
                          <option value="01">湿度传感器</option>
                          <option value="02">风速传感器</option>
                          <option value="03">水盐传感器</option>
                        </select>
                      </div>
                    </div>

                    <div class="layui-inline">
                      <label  class="layui-form-label layui-form-label-md ">传感器地址</label>
                      <div class="layui-input-inline">
                        <input type="text" id="sensorAddr" name="sensorSerialNum" autocomplete="off" class="layui-input">
                      </div>
                    </div>
                  </div>

                    <div class="layui-form-item magt3">
                      <label class="layui-form-label lovexian-form-item-require">描述</label>
                      <div class="layui-input-block">
                        <div class="layui-input-inline">
                          <textarea style="width: 500px;height: 100px" placeholder="请输入描述"
                                    class="layui-textarea commandReason" name="description"></textarea>
                        </div>
                      </div><!--同样需要修改变量名称-->
                    </div>
                  <div class="layui-form layui-form-item">
                    <button class="layui-btn layui-btn-normal" id="crc" lay-filter="execute" lay-submit><i
                            class="layui-icon">&#xe621;</i>CRC校验
                    </button>
                    <div class="layui-inline">
                      <label class="layui-form-label lovexian-form-item-require">数据</label>
                      <div class="layui-inline" style="width:500px !important">
                        <input type="text" id="crcData" name="data" autocomplete="off" class="layui-input">
                      </div>
                    </div>
                  </div>
                  <button class="layui-btn layui-btn-normal" id="btn" onclick="threeFn() " lay-filter="execute" lay-submit><i
                          class="layui-icon">&#xe621;</i>执行
                  </button>
                  <button class="layui-btn layui-btn-primary layui-btn-normal" lay-filter="cancelBtn" lay-submit><i
                          class="layui-icon">&#xe669;</i>取消
                  </button>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


<script>
  function changeType() {
    if ($('#command option:selected').val()=="A1"){
            $('#sensorNum').style.display=="none";
        }
    else if ($('#command option:selected').val()=="A2"){
      $('#sensorNum').style.display=="none";
    }
  }


var starEle;
  var starNum = 0;
  layui.data.sendParams = function (params) {
    if (params.isEdit) {
      starNum = params.star;
    }
    layui.use('rate', function () {
      var rate = layui.rate;
      //渲染
      starEle = rate.render({
        elem: '#test2',  //绑定元素,
        length: 5,
        value: starNum
        , choose: function (value) {
          starNum = value;
        }
      });
    });
  };

</script>
<script>
  layui.use('theme/command/commandManage/commandAdd', layui.factory('theme/command/commandManage/commandAdd'));
</script>
